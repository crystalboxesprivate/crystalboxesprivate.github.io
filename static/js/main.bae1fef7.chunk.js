(this["webpackJsonpinspect-psd"]=this["webpackJsonpinspect-psd"]||[]).push([[0],{122:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),o=n(14),l=n(57),u=n(24),s=n(28),d=n(61),m=n(18),f=n(130),g=n(7);function p(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var n=Object(a.useState)(t),r=Object(g.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){if(e)return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)};function n(){i(t())}}),[]),c}var h=n(23),E=n(22),y=n(25),v=Object(h.b)({isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_MERGED_IS_LOADING"===t.type?t.isLoading:e},imageData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SED_MERGED_IMAGE_DATA"===t.type?t.imageData:e}}),b=Object(h.b)({filename:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SET_FILENAME"===t.type?t.filename:e},importData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IMPORT_DATA":return t.data;case"SET_LAYER_MASK_SECTION":return null==e?e:Object(y.a)(Object(y.a)({},e),{},{layerMaskSection:t.section});default:return e}},currentLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_LAYER"===t.type?t.layerId:e},fileIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"UPDATE_FILE_INDEX"===t.type?e+1:e},layers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DUMP_LAYERS":return[];case"SET_IS_LAYER_LOADING":return e.map((function(e,n){return n===t.index?Object(y.a)(Object(y.a)({},e),{},{isLoading:t.isLoading}):e}));case"SET_LAYER_IMAGE_DATA":return e.map((function(e,n){return n===t.index?Object(y.a)(Object(y.a)({},e),{},{layerImage:t.imageData}):e}));case"ADD_LAYER_INFO":return[].concat(Object(E.a)(e),[t.layerInfo]);default:return e}},layersToLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"SET_LAYERS_TO_LOAD"===t.type?e+t.layersToLoad:e},mergedImage:v}),w=function(e){return{type:"SED_MERGED_IMAGE_DATA",imageData:e}},I=function(e){return{type:"SET_MERGED_IS_LOADING",isLoading:e}},O=function(e){return{type:"SET_LAYERS_TO_LOAD",layersToLoad:e}},_=function(e,t){return{type:"SET_IS_LAYER_LOADING",isLoading:e,index:t}},j=function(e){return{type:"SET_FILENAME",filename:e}},L=function(e){return{type:"SET_IMPORT_DATA",data:e}},D=function(e){return{type:"SET_CURRENT_LAYER",layerId:e}},A=function(){return{type:"UPDATE_FILE_INDEX"}},S=function(){return{type:"DUMP_LAYERS"}},T=function(e){return{type:"ADD_LAYER_INFO",layerInfo:e}},C=function(e,t){return{type:"SET_LAYER_IMAGE_DATA",imageData:e,index:t}},M=n(66),R=n(67),x=n(129),k=n(132),z=n(54),P=n.n(z),N=n(55),G=n(9),Y=n.n(G),F=n(26);function B(e){return window.psd_createPsdFile(e)}function U(e,t){return window.psd_parseLayerMaskSection(e,t)}function W(e){return window.psd_getDocumentInfo(e)._jsObject}function H(e){return window.psd_createDocument(e)}function K(e){return window.psd_getLayerCount(e)}function X(e,t){return window.psd_getLayer(e,t)}function J(e){return window.psd_getLayerInfo(e)._jsObject}function q(e,t,n,a){return window.psd_createInterleavedImage(e,t,n,a)}function Q(e,t,n){return window.psd_getMergedImageFromImageDataSection(e,t,n)}function Z(e,t,n){e(L(n)),e(j(t)),e(D(0)),e(A())}function $(e,t){return V.apply(this,arguments)}function V(){return(V=Object(F.a)(Y.a.mark((function e(t,n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){n.arrayBuffer().then((function(n){var a=B(new Uint8Array(n)),r=H(a);r||t("Invalid PSD file");var c=W(r);e({document:r,file:a,layerMaskSection:null,documentInfo:c})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(F.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(t){200===this.status?e(this.response):n("Couldn't load the file")};try{a.send()}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t,n,a){return ae.apply(this,arguments)}function ae(){return(ae=Object(F.a)(Y.a.mark((function e(t,n,a,r){var c,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t(O(a)),c=function(e){var a=X(r,e),c=J(a);console.time('Interleave layer "'.concat(c.name,'" (').concat(e,")")),q(n.document,n.file,a,(function(a){console.timeEnd('Interleave layer "'.concat(c.name,'" (').concat(e,")")),null==a||t(C(new ImageData(new Uint8ClampedArray(a),n.documentInfo.width,n.documentInfo.height),e)),t(_(!1,e)),t(O(-1))}))},i=0;i<a;i++)c(i);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(F.a)(Y.a.mark((function e(t,n){var a,r,c,i,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("load layer mask section"),a=U(t.document,t.file)){e.next=4;break}throw Error("Couldn't parse the layer mask section");case 4:for(r=K(a),c=0;c<r;c++)i=X(a,c),(o=J(i)).isLoading=!0,n(T(o));return ne(n,t,r,a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(F.a)(Y.a.mark((function e(t,n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(I(!0)),n(w(null)),console.time("Parse image data"),Q(t.document,t.file,(function(e){console.timeEnd("Parse image data"),e&&n(w(new ImageData(new Uint8ClampedArray(e),t.documentInfo.width,t.documentInfo.height))),n(I(!1))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(F.a)(Y.a.mark((function e(){var t,n,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="sample.psd",e.next=3,ee(t);case 3:return n=e.sent,e.next=6,$(t,n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){var t=e.currentLayer,n=Object(o.c)((function(e){return{imageWidth:e.importData.documentInfo.width,imageHeight:e.importData.documentInfo.height}})),c=n.imageWidth,i=n.imageHeight,u=p(),d=u.width,m=u.height,f=d&&m?Math.min(d/c,m/i):1,g=Object(o.c)((function(e){return-1===t?e.mergedImage.imageData:e.layers[t].layerImage})),h=Object(a.useRef)(null),E=p().height,y=Object(a.useRef)();return Object(a.useEffect)((function(){var e,t=null===(e=h.current)||void 0===e?void 0:e.getContext("2d");null===t||void 0===t||t.scale(1,1),null===t||void 0===t||t.putImageData(g,0,0),null===t||void 0===t||t.scale(1,1)})),Object(a.useEffect)((function(){f<1&&y.current.autoCenter(f)}),[]),r.a.createElement(N.PanZoom,{ref:y},r.a.createElement(s.a,{alignContent:"center",height:E,justifyContent:"center",alignItems:"center"},r.a.createElement(l.c,{backgroundColor:"static-white"},r.a.createElement("canvas",{ref:h,id:"image-view",width:1*c,height:1*i}))))}function le(){var e=p(),t=Object(M.a)({noClick:!0,noKeyboard:!0}),n=t.acceptedFiles,c=t.getRootProps,i=t.getInputProps,d=0!==n.length?n[0]:null,m=d?d.name:"",f=Object(a.useState)(!1),h=Object(g.a)(f,2),E=h[0],y=h[1],v=Object(a.useState)(""),b=Object(g.a)(v,2),w=b[0],I=b[1],O=Object(o.b)(),_=Object(o.c)((function(e){return e.currentLayer})),j=Object(o.c)((function(e){var t;return-1===_?e.mergedImage.isLoading:!((null===(t=e.layers)||void 0===t?void 0:t.length)>0)||e.layers[_].isLoading})),L=Object(o.c)((function(e){var t;return e.layersToLoad/(null===(t=e.layers)||void 0===t?void 0:t.length)})),D=Object(o.c)((function(e){var t;return-1===_?e.mergedImage.imageData:(null===(t=e.layers)||void 0===t?void 0:t.length)>0?e.layers[_].layerImage:null}));return Object(a.useEffect)((function(){null!=d&&$(null===d||void 0===d?void 0:d.name,d).then((function(e){Z(O,m,e)})).catch((function(e){I(e),y(!0)}))}),[m]),r.a.createElement(l.c,{height:e.height,position:"relative",flex:!0},null==D?r.a.createElement(l.c,{zIndex:0,position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"},r.a.createElement(s.a,{alignContent:"center",height:e.height,justifyContent:"center",alignItems:"center"},j?isNaN(L)||L>.99?r.a.createElement(R.b,{size:"L","aria-label":"Loading\u2026",isIndeterminate:!0}):r.a.createElement(R.a,{size:"L",label:"Extracting layers\u2026",value:Math.floor(100*(1-L))}):r.a.createElement(x.a,null,r.a.createElement(P.a,null),r.a.createElement(u.a,null,"Couldn't extract this layer")))):null,r.a.createElement("div",Object.assign({},c({className:"dropzone"}),{style:de}),r.a.createElement("input",i()),null!=D?r.a.createElement(oe,{currentLayer:_}):null),r.a.createElement(k.b,{isOpen:E},r.a.createElement(r.a.Fragment,null),r.a.createElement(k.a,{title:"PSD Import",variant:"error",primaryActionLabel:"Confirm",onPrimaryAction:function(){return y(!1)}},w)))}var ue,se,de={position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1,outline:"none"},me=n(131),fe=n(32);function ge(e){var t=e.title,n=e.layers,a=e.index,c=e.selected,i=e.dispatch;return r.a.createElement(me.a,{selectedKeys:+c===+a?"all":[],selectionMode:"single","aria-label":t,onSelectionChange:function(e){var t=Array.from(e);0!==t.length&&(t[0]>=n.length||i(D(t[0])))}},r.a.createElement(fe.a,{key:+a},t))}function pe(e){var t=e.layers,n=Object(o.b)(),a=Object(o.c)((function(e){return e.currentLayer}));return r.a.createElement(l.c,null,r.a.createElement(me.a,{selectedKeys:-1===+a?"all":[],selectionMode:"single","aria-label":"Merged",onSelectionChange:function(){n(D(-1))}},r.a.createElement(fe.a,{key:232},"Merged")),r.a.createElement(d.a,{key:"div",size:"S"}),function(e){for(var t=[],n=0,a=e.length-1;a>=0;a--)t[n++]=e[a];return t}(t.map((function(e,c){return r.a.createElement(ge,{key:e.hashCode,dispatch:n,title:e.name,layers:t,index:c,selected:a})}))))}function he(){var e=Object(o.c)((function(e){return e.layers}));return r.a.createElement(Le,null,r.a.createElement(l.c,null,r.a.createElement(u.a,null,"Layers"),e&&0!==e.length?r.a.createElement(pe,{layers:e}):r.a.createElement(s.a,{justifyContent:"center"},r.a.createElement(R.b,{"aria-label":"Loading\u2026",isIndeterminate:!0}))))}function Ee(e){var t=e.children,n=e.size;return r.a.createElement("code",{className:"spectrum-Code spectrum-Code--".concat(n||"S")},t)}!function(e){e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom"}(ue||(ue={})),function(e){e.Informative="info",e.Positive="positive",e.Negative="negative"}(se||(se={}));var ye=n(38),ve=n(64),be=n.n(ve),we=n(65);function Ie(){var e=Object(o.c)((function(e){return e.filename}));return r.a.createElement(l.a,null,r.a.createElement("b",null,e))}function Oe(){var e=Object(a.useRef)(document.getElementById("image-view")),t=Object(o.c)((function(e){try{return e.layers[e.currentLayer].name}catch(t){return"layer"}})),n=Object(o.c)((function(e){try{return-1===e.currentLayer?e.mergedImage.imageData:e.layers[e.currentLayer].layerImage}catch(t){return null}}));return Object(a.useEffect)((function(){e.current=document.getElementById("image-view")}),[t]),r.a.createElement(ye.a,{"aria-labelledby":"Save",isDisabled:!e||!n,onPress:function(){var n;null===(n=e.current)||void 0===n||n.toBlob((function(e){e&&Object(we.saveAs)(e,"".concat(t,".png"))}))},isQuiet:!0},r.a.createElement(be.a,null))}function _e(){return r.a.createElement(l.c,{backgroundColor:"gray-50",paddingStart:"size-300",paddingEnd:"size-250",zIndex:3},r.a.createElement(l.b,{height:"size-700"},r.a.createElement(s.a,{direction:"row",justifyContent:"space-between"},r.a.createElement(u.a,null,"PSD Inspect"),r.a.createElement(l.c,{alignSelf:"center"},r.a.createElement(Ie,null)),r.a.createElement(l.c,{alignSelf:"center"},r.a.createElement(Oe,null)))))}function je(){var e=Object(o.c)((function(e){return e.filename})),t=Object(o.c)((function(e){return e.importData}));if(!t||!t.document)return null;var n=W(t.document),a=[["File Name",e],["Width",n.width],["Height",n.height],["Channel Count",n.channelCount],["Bits per Channel",n.bitsPerChannel],["Color Mode",n.colorMode]];return r.a.createElement(l.c,null,r.a.createElement(Le,null,r.a.createElement(u.a,null,"Document Info"),r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement(s.a,{key:e[0],direction:"row"},r.a.createElement(l.a,{width:"size-1700"},r.a.createElement("span",{style:{color:(t="gray-700","var(--spectrum-global-color-".concat(t,", var(--spectrum-semantic-").concat(t,"-color-").concat("default","))"))}},"".concat(e[0]).toLowerCase())),r.a.createElement(Ee,null,e[1]));var t})))))}function Le(e){var t=e.children;return r.a.createElement(l.c,{backgroundColor:"gray-50",zIndex:2,width:"size-3000",paddingStart:"size-300",paddingEnd:"size-300",paddingTop:"size-50"},t)}function De(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.fileIndex})),n=Object(o.c)((function(e){return e.importData}));return Object(a.useEffect)((function(){(function(){return ie.apply(this,arguments)})().then((function(t){Z(e,"sample.psd",t)}))}),[]),Object(a.useEffect)((function(){n&&(e(S()),function(e,t){return re.apply(this,arguments)}(n,e).catch((function(e){console.log(e)})),function(e,t){return ce.apply(this,arguments)}(n,e).catch((function(e){console.log(e)})))}),[t]),t}function Ae(){De(),p().height;return r.a.createElement(l.c,{overflow:"hidden"},r.a.createElement(s.a,{direction:"column"},r.a.createElement(_e,null),r.a.createElement(s.a,{direction:"row"},r.a.createElement(le,null),r.a.createElement(l.c,{backgroundColor:"gray-50",zIndex:2},r.a.createElement(s.a,{direction:"row"},r.a.createElement(je,null),r.a.createElement(d.a,{marginTop:"size-250",marginBottom:"size-250",orientation:"vertical",size:"S"}),r.a.createElement(he,null))))))}var Se=function(){var e=Object(h.c)(b);return r.a.createElement(o.a,{store:e},r.a.createElement(m.a,{colorScheme:"light",theme:f.a},r.a.createElement(Ae,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(122),n(123),n(124),n(125),n(126),n(127);document.documentElement.classList.add("spectrum","spectrum--medium","spectrum--light"),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,n){e.exports=n(128)},91:function(e,t){}},[[68,1,2]]]);
//# sourceMappingURL=main.bae1fef7.chunk.js.map